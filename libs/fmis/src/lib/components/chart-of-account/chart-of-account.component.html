<div class="saveUpdateBar border mat-elevation-z2">
  <button
    mat-button
    class="save cursorPointer"
    data-bs-toggle="modal"
    data-bs-target="#newCOA"
  >
    <mat-icon>add</mat-icon>
    <span class="ps-2">New</span>
  </button>
</div>
<div class="row">
  <div class="col-md-12">
    <h2 class="pt-3 ps-4 pe-3">Add / Modify</h2>
    <hr />
  </div>
</div>
<div class="row">
  <society-chart-of-account-table
    (eventEmitter)="edit($event)"
  ></society-chart-of-account-table>
</div>

<!-- modal window for chart of account entry -->
<!-- Modal -->
<div
  class="modal fade"
  id="newCOA"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
  data-bs-backdrop="false"
>
  <div class="modal-dialog modal-xl modal-dialog-centered">
    <div class="modal-content mat-elevation-z20">
      <div class="modal-header bg-light">
        <h4 class="modal-title text-primary" id="exampleModalLabel">
          Head Of Account
        </h4>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-md-5">
            <div class="row">
              <mat-form-field class="col-12 pe-4">
                <mat-label>Type</mat-label>
                <mat-select
                  [(ngModel)]="formFields[3].value"
                  (ngModelChange)="getlevel01(formFields[3].value)"
                >
                  <mat-option
                    *ngFor="let item of coaTypeList"
                    [value]="item.coaTypeID"
                    >{{ item.coaTypeTitle }}</mat-option
                  >
                </mat-select>
              </mat-form-field>
            </div>
            <div class="row">
              <mat-form-field class="col-12 pe-4">
                <mat-label>Select Level</mat-label>
                <mat-select
                  [(ngModel)]="cmbLevelNo"
                  (ngModelChange)="
                    getlevel01(formFields[3].value); onLevelChange(cmbLevelNo)
                  "
                >
                  <mat-option
                    *ngFor="let item of levelTypeList"
                    [value]="item.typeID"
                  >
                    {{ item.typeName }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="row">
              <mat-form-field class="col-12 pe-4" *ngIf="cmbLevelNo > 1">
                <mat-label>Select Level 01</mat-label>
                <mat-select
                  [(ngModel)]="formFields[4].value"
                  (ngModelChange)="getlevel02(formFields[4].value)"
                >
                  <mat-option
                    *ngFor="let item of coaLevel1List"
                    [value]="item.level1"
                  >
                    {{ item.level1 }} - {{ item.coaTitle }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
              <mat-form-field class="col-12 pe-4" *ngIf="cmbLevelNo == 1">
                <mat-label>Enter Level 01</mat-label>
                <input
                  matInput
                  [(ngModel)]="formFields[4].value"
                  (keyup)="getLevel('1')"
                />
              </mat-form-field>
            </div>
            <div class="row">
              <mat-form-field class="col-12 pe-4" *ngIf="cmbLevelNo > 2">
                <mat-label>Select Level 02</mat-label>
                <mat-select
                  [(ngModel)]="formFields[5].value"
                  (ngModelChange)="getlevel03(formFields[5].value)"
                >
                  <mat-option
                    *ngFor="let item of coaLevel2List"
                    [value]="item.level2"
                  >
                    {{ item.level2 }} - {{ item.coaTitle }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
              <mat-form-field class="col-12 pe-4" *ngIf="cmbLevelNo == 2">
                <mat-label>Enter Level 02</mat-label>
                <input
                  matInput
                  [(ngModel)]="formFields[5].value"
                  (keyup)="getLevel('2')"
                />
              </mat-form-field>
            </div>
            <div class="row">
              <mat-form-field class="col-12 pe-4" *ngIf="cmbLevelNo > 3">
                <mat-label>Select Level 03</mat-label>
                <mat-select [(ngModel)]="formFields[6].value">
                  <mat-option
                    *ngFor="let item of coaLevel3List"
                    [value]="item.level3"
                  >
                    {{ item.level3 }} - {{ item.coaTitle }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
              <mat-form-field class="col-12 pe-4" *ngIf="cmbLevelNo == 3">
                <mat-label>Enter Level 03</mat-label>
                <input
                  matInput
                  [(ngModel)]="formFields[6].value"
                  (keyup)="getLevel('3')"
                />
              </mat-form-field>
            </div>
            <div class="row">
              <mat-form-field class="col-12 pe-4" *ngIf="cmbLevelNo == 4">
                <mat-label>Enter Level 04</mat-label>
                <input
                  matInput
                  [(ngModel)]="formFields[7].value"
                  (keyup)="getLevel('4')"
                />
              </mat-form-field>
            </div>
          </div>
          <div class="col-md-7">
            <div class="row">
              <div class="d-flex flex-row">
                <h4 class="pt-1">Account Head Label:</h4>
                <h3 class="ms-3 orange-text">{{ lblAccountCode }}</h3>
              </div>
            </div>
            <div class="row">
              <mat-form-field class="col-12 pe-4">
                <mat-label>Account Head Title</mat-label>
                <input
                  matInput
                  [(ngModel)]="formFields[8].value"
                  maxlength="50"
                />
              </mat-form-field>
            </div>

            <!-- transfer of fund setting -->
            <div>
              <h5>Is Transaction Allowed in this Head?</h5>
              <div class="row">
                <div class="col-md-12">
                  <mat-radio-group
                    aria-label="Select an option"
                    [(ngModel)]="formFields[9].value"
                    [disabled]="disableTrans"
                  >
                    <div class="d-flex flex-column">
                      <mat-radio-button value="true">Yes</mat-radio-button>
                      <mat-radio-button value="false">No</mat-radio-button>
                    </div>
                  </mat-radio-group>
                </div>
              </div>
              <hr />
              <div class="row">
                <h5>Is it Member's Receipt Head?</h5>
                <div class="col-md-12">
                  <section class="example-section">
                    <mat-checkbox
                      class="example-margin"
                      [(ngModel)]="formFields[10].value"
                      value="true"
                      [disabled]="disableTrans"
                      >Yes</mat-checkbox
                    >
                  </section>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer dark-light-bg">
        <div class="d-flex flex-row w-100 justify-content-around">
          <button mat-raised-button class="savebtn" (click)="save()">
            Save
          </button>
          <button mat-raised-button class="resetbtn" (click)="reset()">
            Reset
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
